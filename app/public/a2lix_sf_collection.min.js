"use strict";const a2lix_lib={};a2lix_lib.sfCollection=(()=>{const t=(t={})=>{if(!("content"in document.createElement("template"))){console.error("HTML template will not working...");return}const{collectionsSelector:n="form div[data-prototype]",manageRemoveEntry:r=true}=t;const a=document.querySelectorAll(n);if(!a.length){return}a.forEach(t=>{e(t,r)})};const e=(t,e=false)=>{t.setAttribute("data-entry-index",t.children.length);n(t);if(e){r(t)}t.addEventListener("click",t=>a(t,e))};const n=t=>{const e=t.getAttribute("data-entry-label")||"";const n=i(`Add ${e}`,"add","btn btn-primary btn-sm mt-2");t.appendChild(n)};const r=t=>{const e=i("Remove","remove","btn btn-danger btn-sm");const n=[...t.children].filter(t=>!t.hasAttribute("data-entry-action")).forEach(t=>{t.appendChild(e.cloneNode(true))})};const a=(t,e)=>{if(!t.target.hasAttribute("data-entry-action")){return}switch(t.target.getAttribute("data-entry-action")){case"add":o(t.currentTarget,t.target,e);break;case"remove":c(t.currentTarget,t.target);break}};const o=(t,e,n)=>{const r=t.getAttribute("data-entry-index");t.setAttribute("data-entry-index",+r+1);const a=t.getAttribute("data-prototype"),o=s(a,r);if(n){const t=i("Remove","remove","btn btn-danger btn-sm");o.firstChild.appendChild(t)}e.parentElement.insertBefore(o,e)};const c=(t,e)=>{e.parentElement.remove()};const i=(t,e,n="btn")=>{const r=document.createElement("button");r.type="button";r.textContent=t;r.className=n;r.dataset.entryAction=e;return r};const s=(t,e)=>{const n=document.createElement("template");const r=t.replace(/__name__label__/g,`!New! ${e}`).replace(/__name__/g,e);n.innerHTML=r.trim();return n.content};return{init:t}})();